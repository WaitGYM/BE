# ğŸ‹ï¸â€â™‚ï¸ í—¬ìŠ¤ì¥ ì›¨ì´íŒ… ì‹œìŠ¤í…œ (Gym Waiting System)

> **ì‹¤ì‹œê°„ ê¸°êµ¬ ëŒ€ê¸°ì—´ ê´€ë¦¬ ì‹œìŠ¤í…œ** - ì¤„ì„œê¸° ë°©ì‹ìœ¼ë¡œ ê³µì •í•˜ê³  íš¨ìœ¨ì ì¸ í—¬ìŠ¤ì¥ ê¸°êµ¬ ì‚¬ìš©

## ğŸ“– ê°œìš”

ê¸°ì¡´ì˜ ë³µì¡í•œ **ì‹œê°„ ì˜ˆì•½ ì‹œìŠ¤í…œ**ì„ ë„˜ì–´ì„ , ì‹¤ì œ í—¬ìŠ¤ì¥ í™˜ê²½ì— ìµœì í™”ëœ **ì›¨ì´íŒ…(ëŒ€ê¸°ì—´) ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. 
ì‹œê°„ì„ ë¯¸ë¦¬ ì •í•˜ì§€ ì•Šê³ , í˜„ì¥ì—ì„œ **"ì¤„ì„œê¸°"** ë°©ì‹ìœ¼ë¡œ ìˆœì„œë¥¼ ê¸°ë‹¤ë¦° í›„, **ì„¸íŠ¸ë³„ ìš´ë™ ì§„í–‰ì„ ì‹¤ì‹œê°„ ì¶”ì **í•˜ì—¬ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì‚¬ëŒì—ê²Œ ë„˜ì–´ê°€ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ í”Œë¡œìš°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ‹ï¸ í—¬ìŠ¤ì¥ ê¸°êµ¬ ì˜ˆì•½ ë° ì›¨ì´íŒ… ì‹œìŠ¤í…œ - Backend API ë¬¸ì„œ
### ğŸ”‘ Auth API
- `GET /api/auth/google` - Google OAuth ë¡œê·¸ì¸ ì‹œì‘
- `GET /api/auth/google/callback` - OAuth ì½œë°± ì²˜ë¦¬
- `GET /api/auth/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
- `POST /api/auth/logout` - ë¡œê·¸ì•„ì›ƒ

### ğŸ“‹ Equipment API  
- `GET /api/equipment` - ê¸°êµ¬ ëª©ë¡ ì¡°íšŒ (ì¹´í…Œê³ ë¦¬/ê²€ìƒ‰ í•„í„° í¬í•¨)
- `GET /api/equipment/search` - ê¸°êµ¬ ê²€ìƒ‰ (ê²€ìƒ‰ì–´ë¡œ í•„í„°ë§, ì‘ë‹µ í˜•ì‹ì€ ê¸°êµ¬ ëª©ë¡ê³¼ ë™ì¼)
- `GET /api/equipment/categories` - ì¹´í…Œê³ ë¦¬ ëª©ë¡
- `GET /api/equipment/:id` - íŠ¹ì • ê¸°êµ¬ ìƒì„¸ ì¡°íšŒ
- `GET /api/equipment/status?equipmentIds=...` - ì—¬ëŸ¬ ê¸°êµ¬ë“¤ì˜ ì‹¤ì‹œê°„ ìƒíƒœ ì •ë³´ ì¡°íšŒ (ì—¬ëŸ¬ ê¸°êµ¬ì˜ ì‚¬ìš©/ëŒ€ê¸° í˜„í™© í•œë²ˆì— í™•ì¸)
- `GET /api/equipment/my-completed` - ë‚´ê°€ ì˜¤ëŠ˜/ì§€ì •ì¼ì— ì™„ë£Œí•œ ìš´ë™ ëª©ë¡ ì¡°íšŒ (ë‚´ ì‚¬ìš© ì´ë ¥)
- `GET /api/equipment/my-stats` - ë‚˜ì˜ ìš´ë™ í†µê³„ ì •ë³´ ì¡°íšŒ (ì£¼/ì›”/ë…„ë³„ í•©ê³„ ë° ë¶„ì„)
- `POST /api/equipment/:id/quick-start` - ì¦‰ì‹œ ìš´ë™ ì‹œì‘ (í•´ë‹¹ ê¸°êµ¬ê°€ ë¹„ì–´ ìˆë‹¤ë©´ ë°”ë¡œ ì‚¬ìš© ì‹œì‘)

### â­ Favorites API
- `GET /api/favorites` - ë‚´ ì¦ê²¨ì°¾ê¸° ëª©ë¡
- `POST /api/favorites` - ì¦ê²¨ì°¾ê¸° ì¶”ê°€
- `DELETE /api/favorites/equipment/:equipmentId` - ì¦ê²¨ì°¾ê¸° ì œê±°
- `GET /api/favorites/check/:equipmentId` - ì¦ê²¨ì°¾ê¸° ìƒíƒœ í™•ì¸

### ğŸ“… Reservations API (ê¸°ì¡´ ì˜ˆì•½ ì‹œìŠ¤í…œ) => ì œê±°í•  í•­
- `POST /api/reservations` - ì˜ˆì•½ ìƒì„±
- `GET /api/reservations/me` - ë‚´ ì˜ˆì•½ ëª©ë¡
- `GET /api/reservations/:id` - íŠ¹ì • ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ
- `PUT /api/reservations/:id` - ì˜ˆì•½ ìˆ˜ì •
- `DELETE /api/reservations/:id` - ì˜ˆì•½ ì‚­ì œ
- `GET /api/reservations/availability` - ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ í™•ì¸
- `GET /api/reservations/equipment/:equipmentId` - íŠ¹ì • ê¸°êµ¬ì˜ ì˜ˆì•½ í˜„í™© ì¡°íšŒ (ì„ íƒ ë‚ ì§œì— ëŒ€í•œ ì¼ì •, ê³µê°œ)

### â° ìˆ˜ì •ëœ Waiting System API (ì›¨ì´íŒ… ì‹œìŠ¤í…œ)
**ğŸ‹ï¸ ìš´ë™ ê´€ë¦¬:**
- `POST /api/waiting/start-using/:equipmentId` - ê¸°êµ¬ ì‚¬ìš© ì‹œì‘
- `POST /api/waiting/complete-set/:equipmentId` - ì„¸íŠ¸ ì™„ë£Œ
- `POST /api/waiting/skip-rest/:equipmentId` - íœ´ì‹ ìŠ¤í‚µ
- `POST /api/waiting/stop-exercise/:equipmentId` - ìš´ë™ ì¤‘ë‹¨

**ğŸ“ ëŒ€ê¸°ì—´ ê´€ë¦¬:**
- `POST /api/waiting/queue/:equipmentId` - ëŒ€ê¸°ì—´ ë“±ë¡(í•´ë‹¹ ê¸°êµ¬ì— ëŒ€ê¸° ì‹œì‘)
- `DELETE /api/waiting/queue/:queueId` - ëŒ€ê¸°ì—´ ì·¨ì†Œ(í˜„ì¬ ì„œë²„ ë¯¸êµ¬í˜„)
- `GET /api/waiting/status/:equipmentId` - ê¸°êµ¬ ìƒíƒœ ë° ëŒ€ê¸°ì—´ ì¡°íšŒ
- `POST /api/waiting/update-eta/:equipmentId` - (ìˆ˜ë™) ì˜ˆìƒ ëŒ€ê¸°ì‹œê°„ ì—…ë°ì´íŠ¸ + ë¸Œë¡œë“œìºìŠ¤íŠ¸

**ğŸ”§ ê´€ë¦¬ì ê¸°ëŠ¥:**
- `GET /api/waiting/stats` - ì‚¬ìš© í†µê³„ ì¡°íšŒ

**ğŸ“‹ ìš´ë™ ë£¨í‹´(ë£¨í‹´ APIëŠ” ëª¨ë‘ JWT ì¸ì¦ í•„ìš”):**
- `GET /api/routines` - ë‚´ ìš´ë™ ë£¨í‹´ ëª©ë¡ ì¡°íšŒ(í•„ìš”ì— ë”°ë¼ í™œì„±/ë¹„í™œì„± í•„í„°)
- `GET /api/routines/:id - íŠ¹ì • ë£¨í‹´ ìƒì„¸ ì¡°íšŒ(í¬í•¨ëœ ìš´ë™ ëª©ë¡ ë“±)
- `POST /api/routines/:id` - ìƒˆë¡œìš´ ìš´ë™ ë£¨í‹´ ìƒì„± (ì´ë¦„, êµ¬ì„±, í™œì„± ì—¬ë¶€ ë³€ê²½)
- `PUT /api/routines/:id` - ìš´ë™ ë£¨í‹´ ìˆ˜ì •(ì´ë¦„, êµ¬ì„±, í™œì„±ì—¬ë¶€ ë³€ê²½)
- `DELETE /api/routines/:id` - ìš´ë™ ë£¨í‹´ ì‚­ì œ
- `POST /api/routines/:routineId/exercises/:exerciseId/start` - ë£¨í‹´ì˜ íŠ¹ì • ìš´ë™ ì¦‰ì‹œ ì‹œì‘(ê¸°êµ¬ ì‚¬ìš©ì‹œì‘)
- `POST /api/routines/:routineId/exercises/:exerciseId/queue` - ë£¨í‹´ì˜ íŠ¹ì • ìš´ë™ ëŒ€ê¸°ì—´ ë“±ë¡

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

ì´ ì‹œìŠ¤í…œì€ í—¬ìŠ¤ì¥ì˜ ê¸°êµ¬ ì‚¬ìš©ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë°±ì—”ë“œ APIì…ë‹ˆë‹¤. ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- **Google OAuth ì¸ì¦**: ê°„í¸í•œ ì†Œì…œ ë¡œê·¸ì¸
- **ê¸°êµ¬ ê´€ë¦¬**: ì¹´í…Œê³ ë¦¬ë³„ í—¬ìŠ¤ì¥ ê¸°êµ¬ ì¡°íšŒ
- **ì˜ˆì•½ ì‹œìŠ¤í…œ**: ì‹œê°„ ê¸°ë°˜ ê¸°êµ¬ ì˜ˆì•½
- **ì›¨ì´íŒ… ì‹œìŠ¤í…œ**: ì‹¤ì‹œê°„ ëŒ€ê¸°ì—´ ê´€ë¦¬ ë° ì„¸íŠ¸ë³„ ìš´ë™ ì¶”ì 
- **ì¦ê²¨ì°¾ê¸°**: ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°êµ¬ ì €ì¥
- **ì‹¤ì‹œê°„ ì•Œë¦¼**: WebSocketì„ í†µí•œ ì¦‰ì‹œ ì•Œë¦¼

## ğŸ” ì¸ì¦ (Authentication)

### Headers
```
Authorization: Bearer <JWT_TOKEN>
```

---

## ğŸ“‹ Equipment API

### GET `/api/equipment`
ê¸°êµ¬ ëª©ë¡ ì¡°íšŒ (ì¸ì¦ ì„ íƒ)
- **Query Parameters:**
  - `category` (optional): ì¹´í…Œê³ ë¦¬ í•„í„° ('ê°€ìŠ´', 'ë“±', 'ë‹¤ë¦¬', 'ì–´ê¹¨', 'íŒ”', 'ìœ ì‚°ì†Œ' ë“±)
  - `search` (optional): ê²€ìƒ‰ì–´
- **Request Body:** ì—†ìŒ

### GET `/api/equipment/categories`
ì¹´í…Œê³ ë¦¬ ëª©ë¡ ì¡°íšŒ
- **Request Body:** ì—†ìŒ

### GET `/api/equipment/:id`
íŠ¹ì • ê¸°êµ¬ ìƒì„¸ ì¡°íšŒ (ì¸ì¦ ì„ íƒ)
- **Request Body:** ì—†ìŒ

---

## â­ Favorites API

### GET `/api/favorites`
ë‚´ ì¦ê²¨ì°¾ê¸° ëª©ë¡ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### POST `/api/favorites`
ì¦ê²¨ì°¾ê¸° ì¶”ê°€ (ì¸ì¦ í•„ìš”)
```json
{
  "equipmentId": 1
}
```

### DELETE `/api/favorites/equipment/:equipmentId`
ì¦ê²¨ì°¾ê¸° ì œê±° (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### GET `/api/favorites/check/:equipmentId`
íŠ¹ì • ê¸°êµ¬ ì¦ê²¨ì°¾ê¸° ì—¬ë¶€ í™•ì¸ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

---

## ğŸ“… Reservations API (ê¸°ì¡´ ì˜ˆì•½ ì‹œìŠ¤í…œ)

### POST `/api/reservations`
ì˜ˆì•½ ìƒì„± (ì¸ì¦ í•„ìš”)
```json
{
  "equipmentId": 1,
  "startAt": "2025-09-22T10:00:00.000Z",
  "endAt": "2025-09-22T11:00:00.000Z",
  "sets": 3,
  "restMinutes": 3
}
```

### GET `/api/reservations/me`
ë‚´ ì˜ˆì•½ ëª©ë¡ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### GET `/api/reservations/all`
ì „ì²´ ì˜ˆì•½ ëª©ë¡ - ê´€ë¦¬ììš© (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### GET `/api/reservations/:id`
ë‹¨ê±´ ì˜ˆì•½ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### PUT `/api/reservations/:id`
ì˜ˆì•½ ìˆ˜ì • (ì¸ì¦ í•„ìš”)
```json
{
  "equipmentId": 1,
  "startAt": "2025-09-22T10:00:00.000Z",
  "endAt": "2025-09-22T11:00:00.000Z",
  "sets": 4,
  "restMinutes": 2
}
```
*ëª¨ë“  í•„ë“œ ì„ íƒì *

### DELETE `/api/reservations/:id`
ì˜ˆì•½ ì‚­ì œ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### GET `/api/reservations/availability`
ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ í™•ì¸
- **Query Parameters:**
  - `equipmentId`: ê¸°êµ¬ ID (í•„ìˆ˜)
  - `date`: ë‚ ì§œ YYYY-MM-DD (í•„ìˆ˜)
  - `open`: ìš´ì˜ ì‹œì‘ì‹œê°„ (ê¸°ë³¸: 09:00)
  - `close`: ìš´ì˜ ì¢…ë£Œì‹œê°„ (ê¸°ë³¸: 18:00)
  - `slotMinutes`: ìŠ¬ë¡¯ ê°„ê²©(ë¶„) (ê¸°ë³¸: 30)
- **Request Body:** ì—†ìŒ

### GET `/api/reservations/equipment/:equipmentId`
íŠ¹ì • ê¸°êµ¬ì˜ ì˜ˆì•½ í˜„í™© ì¡°íšŒ
- **Query Parameters:**
  - `date`: ë‚ ì§œ YYYY-MM-DD (ê¸°ë³¸: ì˜¤ëŠ˜)
- **Request Body:** ì—†ìŒ

---

## ìˆ˜ì •ëœâ° Waiting System API (ì›¨ì´íŒ… ì‹œìŠ¤í…œ)

### ğŸ‹ï¸ ìš´ë™ ê´€ë¦¬

#### POST `/api/waiting/start-using/:equipmentId`
ê¸°êµ¬ ì‚¬ìš© ì‹œì‘ (ì¸ì¦ í•„ìš”)
```json
{
  "totalSets": 3,
  "restMinutes": 3
}
```

#### POST `/api/waiting/complete-set/:equipmentId`
ì„¸íŠ¸ ì™„ë£Œ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### POST `/api/waiting/skip-rest/:equipmentId`
íœ´ì‹ ìŠ¤í‚µ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### POST `/api/waiting/stop-exercise/:equipmentId`
ìš´ë™ ì¤‘ë‹¨ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### GET `/api/waiting/exercise-status/:equipmentId`
ìš´ë™ ìƒíƒœ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### ğŸ“ ëŒ€ê¸°ì—´ ê´€ë¦¬

#### POST `/api/waiting/queue/:equipmentId`
ëŒ€ê¸°ì—´ ë“±ë¡ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### DELETE `/api/waiting/queue/:queueId`
ëŒ€ê¸°ì—´ ì·¨ì†Œ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### GET `/api/waiting/status/:equipmentId`
ê¸°êµ¬ ìƒíƒœ ë° ëŒ€ê¸°ì—´ ì¡°íšŒ (ê³µê°œ)
- **Request Body:** ì—†ìŒ

### ğŸ”§ ê´€ë¦¬ì ê¸°ëŠ¥

#### POST `/api/waiting/reorder/:equipmentId`
ëŒ€ê¸°ì—´ ì¬ì •ë ¬ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### POST `/api/waiting/force-complete/:equipmentId`
ê°•ì œ ì™„ë£Œ ì²˜ë¦¬ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### GET `/api/waiting/stats`
ì‚¬ìš© í†µê³„ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

#### POST `/api/waiting/cleanup`
ë§Œë£Œëœ ë°ì´í„° ì •ë¦¬ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

---

## ğŸ”‘ Auth API

### GET `/api/auth/google`
Google OAuth ë¡œê·¸ì¸ ì‹œì‘
- **Request Body:** ì—†ìŒ
- **Response:** Google OAuth í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### GET `/api/auth/google/callback`
Google OAuth ì½œë°± (ìë™ ì²˜ë¦¬)
- **Request Body:** ì—†ìŒ

### POST `/api/auth/logout`
ë¡œê·¸ì•„ì›ƒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

### GET `/api/auth/me`
í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ì¸ì¦ í•„ìš”)
- **Request Body:** ì—†ìŒ

---

## ğŸŒ WebSocket API

### WebSocket ì—°ê²°
```
ws://localhost:4000/ws
```

### ì¸ì¦ ë©”ì‹œì§€
```json
{
  "type": "auth",
  "token": "<JWT_TOKEN>"
}
```

### ìˆ˜ì‹  ì•Œë¦¼ íƒ€ì…
- `EQUIPMENT_AVAILABLE`: ê¸°êµ¬ ì‚¬ìš© ê°€ëŠ¥
- `REST_STARTED`: íœ´ì‹ ì‹œì‘
- `NEXT_SET_STARTED`: ë‹¤ìŒ ì„¸íŠ¸ ì‹œì‘
- `EXERCISE_STOPPED`: ìš´ë™ ì¤‘ë‹¨
- `QUEUE_CANCELLED`: ëŒ€ê¸° ì·¨ì†Œ
- `QUEUE_EXPIRED`: ëŒ€ê¸° ë§Œë£Œ
- `FORCE_COMPLETED`: ê´€ë¦¬ì ê°•ì œ ì™„ë£Œ
- `SET_SKIPPED`: íœ´ì‹ ìŠ¤í‚µ

---

## ğŸ“Š Response Format

### ì„±ê³µ ì‘ë‹µ
```json
{
  "id": 1,
  "data": "..."
}
```

### ì˜¤ë¥˜ ì‘ë‹µ
```json
{
  "error": "ì˜¤ë¥˜ ë©”ì‹œì§€",
  "details": "ìƒì„¸ ì •ë³´ (ì„ íƒì )"
}
```

---


## ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket)

### ì—°ê²° ì„¤ì •
```javascript
const ws = new WebSocket('wss://your-backend.com/ws');

ws.onopen = () => {
  // JWT í† í°ìœ¼ë¡œ ì¸ì¦
  ws.send(JSON.stringify({
    type: 'auth',
    token: 'your-jwt-token'
  }));
};

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('ë°›ì€ ì•Œë¦¼:', data);
};
```

### ì•Œë¦¼ íƒ€ì…ë“¤

#### 1. ì¸ì¦ ì„±ê³µ
```json
{
  "type": "auth_success",
  "message": "ì‹¤ì‹œê°„ ì•Œë¦¼ ì—°ê²° ì™„ë£Œ"
}
```

#### 2. ê¸°êµ¬ ì‚¬ìš© ê°€ëŠ¥ ì•Œë¦¼
```json
{
  "type": "EQUIPMENT_AVAILABLE",
  "title": "ê¸°êµ¬ ì‚¬ìš© ê°€ëŠ¥",
  "message": "ë°”ë²¨ ë²¤ì¹˜ í”„ë ˆìŠ¤ì„ ì‚¬ìš©í•  ì°¨ë¡€ì…ë‹ˆë‹¤. 5ë¶„ ë‚´ ì‹œì‘í•´ì£¼ì„¸ìš”",
  "equipmentId": 1,
  "equipmentName": "ë°”ë²¨ ë²¤ì¹˜ í”„ë ˆìŠ¤",
  "queueId": 1,
  "graceMinutes": 5
}
```

#### 3. íœ´ì‹ ì‹œì‘ ì•Œë¦¼
```json
{
  "type": "REST_STARTED",
  "title": "íœ´ì‹ ì‹œì‘",
  "message": "1/3 ì„¸íŠ¸ ì™„ë£Œ. 2ë¶„ íœ´ì‹",
  "equipmentId": 1
}
```

#### 4. ë‹¤ìŒ ì„¸íŠ¸ ì‹œì‘ ì•Œë¦¼
```json
{
  "type": "NEXT_SET_STARTED",
  "title": "ë‹¤ìŒ ì„¸íŠ¸",
  "message": "2/3 ì„¸íŠ¸ ì‹œì‘",
  "equipmentId": 1
}
```

#### 5. ëŒ€ê¸° ë§Œë£Œ ì•Œë¦¼
```json
{
  "type": "QUEUE_EXPIRED",
  "title": "ëŒ€ê¸° ë§Œë£Œ",
  "message": "ì‹œê°„ ì´ˆê³¼ë¡œ ëŒ€ê¸°ì—ì„œ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤",
  "equipmentId": 1
}
```

## ğŸš¨ ì—ëŸ¬ ì²˜ë¦¬

ëª¨ë“  APIëŠ” ë‹¤ìŒ í˜•ì‹ì˜ ì—ëŸ¬ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤:

```json
{
  "error": "ì—ëŸ¬ ë©”ì‹œì§€",
  "details": "ìƒì„¸ ì •ë³´ (ì„ íƒì‚¬í•­)"
}
```

### ì£¼ìš” HTTP ìƒíƒœ ì½”ë“œ
- `200`: ì„±ê³µ
- `201`: ìƒì„± ì„±ê³µ
- `204`: ì‚­ì œ ì„±ê³µ (ì‘ë‹µ ë°”ë”” ì—†ìŒ)
- `400`: ì˜ëª»ëœ ìš”ì²­ (ì…ë ¥ í˜•ì‹ ì˜¤ë¥˜)
- `401`: ì¸ì¦ í•„ìš”
- `403`: ê¶Œí•œ ì—†ìŒ
- `404`: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `409`: ì¶©ëŒ (ì¤‘ë³µ ì˜ˆì•½, ì´ë¯¸ ì‚¬ìš© ì¤‘ ë“±)
- `500`: ì„œë²„ ì˜¤ë¥˜

## ğŸ’¡ ì‚¬ìš© íŒ

1. **í† í° ê´€ë¦¬**: JWT í† í°ì€ localStorageì— ì €ì¥í•˜ê³ , ëª¨ë“  ì¸ì¦ì´ í•„ìš”í•œ API í˜¸ì¶œ ì‹œ `Authorization: Bearer {token}` í—¤ë”ì— í¬í•¨

2. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: ì›¨ì´íŒ… ì‹œìŠ¤í…œ ê´€ë ¨ í™”ë©´ì—ì„œëŠ” WebSocket ì—°ê²°ì„ ìœ ì§€í•˜ì—¬ ì‹¤ì‹œê°„ ì•Œë¦¼ ìˆ˜ì‹ 

3. **ì—ëŸ¬ ì²˜ë¦¬**: 409 ì—ëŸ¬ì˜ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ (ì´ë¯¸ ì‚¬ìš© ì¤‘, ëŒ€ê¸° ì¤‘ ë“±)

4. **ìƒíƒœ í´ë§**: WebSocketì´ ì—°ê²°ë˜ì§€ ì•Šì€ ìƒí™©ì—ì„œëŠ” `/api/waiting/status/{equipmentId}` ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í˜¸ì¶œ

5. **ê¸°êµ¬ ìƒíƒœ í‘œì‹œ**: ê° ê¸°êµ¬ì˜ í˜„ì¬ ìƒíƒœ(ì‚¬ìš© ê°€ëŠ¥, ì‚¬ìš© ì¤‘, ëŒ€ê¸° ì¸ì›)ë¥¼ ëª…í™•íˆ í‘œì‹œ

## âœ¨ ì£¼ìš” íŠ¹ì§•

### ğŸ”” **ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ**
- WebSocket ê¸°ë°˜ ì¦‰ì‹œ ì•Œë¦¼
- ë¸Œë¼ìš°ì € í‘¸ì‹œ ì•Œë¦¼ + ì§„ë™(ëª¨ë°”ì¼)
- 5ë¶„ ìœ ì˜ˆì‹œê°„ ìë™ ê´€ë¦¬

### ğŸ‹ï¸ **ì„¸íŠ¸ë³„ ìš´ë™ ì§„í–‰ ì¶”ì **
- 1~20ì„¸íŠ¸ ììœ  ì„¤ì • (ê¸°ë³¸ 3ì„¸íŠ¸)
- ì„¸íŠ¸ ì™„ë£Œ â†’ ìë™ íœ´ì‹ íƒ€ì´ë¨¸ â†’ ë‹¤ìŒ ì„¸íŠ¸ ì‹œì‘
- ë§ˆì§€ë§‰ ì„¸íŠ¸ ì™„ë£Œ ì‹œ **ìë™ìœ¼ë¡œ ë‹¤ìŒ ì‚¬ëŒì—ê²Œ**
- ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ ë° ë‚¨ì€ íœ´ì‹ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´

### ğŸ“± **ì§ê´€ì ì¸ ì‚¬ìš© ê²½í—˜**
- **ì‹œê°„ ì…ë ¥ ë¶ˆí•„ìš”** - ëŒ€ê¸°ì—´ ë“±ë¡ë§Œ í•˜ë©´ ë
- í˜„ì¬ ìƒíƒœ í•œëˆˆì— íŒŒì•… (ìš´ë™ ì¤‘ vs íœ´ì‹ ì¤‘)
- ìœ ì—°í•œ ì œì–´ (íœ´ì‹ ê±´ë„ˆë›°ê¸°, ìš´ë™ ì¤‘ë‹¨)
- í¬ë¡œìŠ¤ í”Œë«í¼ ë°˜ì‘í˜• ì§€ì›

### ğŸ”„ **ìë™ ëŒ€ê¸°ì—´ ê´€ë¦¬**
- ê³µì •í•œ FIFO(First In, First Out) ìˆœì„œ
- ì·¨ì†Œ/ë§Œë£Œ ì‹œ ìë™ ìˆœë²ˆ ì¬ë°°ì¹˜
- ì‹¤ì‹œê°„ ëŒ€ê¸° í˜„í™© ëª¨ë‹ˆí„°ë§


## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Node.js** + **Express.js** - REST API ì„œë²„
- **WebSocket (ws)** - ì‹¤ì‹œê°„ í†µì‹ 
- **Prisma ORM** - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
- **PostgreSQL** - ë°ì´í„°ë² ì´ìŠ¤
- **Passport.js** - Google OAuth ì¸ì¦
- **JWT** - í† í° ê¸°ë°˜ ì¸ì¦


## ğŸ“± ì‚¬ìš© ë°©ë²•

### 1. íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
- Google ê³„ì •ìœ¼ë¡œ ê°„í¸ ë¡œê·¸ì¸ (OAuth 2.0)
- ìµœì´ˆ ë¡œê·¸ì¸ ì‹œ ìë™ íšŒì›ê°€ì…

### 2. ê¸°êµ¬ ë‘˜ëŸ¬ë³´ê¸°
- ì¹´í…Œê³ ë¦¬ë³„ ê¸°êµ¬ ëª©ë¡ (ê°€ìŠ´, ë“±, ë‹¤ë¦¬, ì–´ê¹¨, íŒ”, ìœ ì‚°ì†Œ, ë³µê·¼)
- ì‹¤ì‹œê°„ ì‚¬ìš© í˜„í™© ë° ëŒ€ê¸°ì—´ ì •ë³´ í™•ì¸

### 3. ì›¨ì´íŒ… ì‹œìŠ¤í…œ ì‚¬ìš©í•˜ê¸°

#### Case 1: ê¸°êµ¬ê°€ ë¹„ì–´ìˆì„ ë•Œ
```
1. ê¸°êµ¬ ì„ íƒ
2. ìš´ë™ ì„¤ì • (ì„¸íŠ¸ ìˆ˜, íœ´ì‹ ì‹œê°„)
3. "ë°”ë¡œ ì‹œì‘" í´ë¦­
4. ì„¸íŠ¸ë³„ ìš´ë™ ì§„í–‰
5. ìë™ ì™„ë£Œ â†’ ë‹¤ìŒ ëŒ€ê¸°ìì—ê²Œ ì•Œë¦¼
```

#### Case 2: ê¸°êµ¬ê°€ ì‚¬ìš© ì¤‘ì¼ ë•Œ
```
1. ê¸°êµ¬ ì„ íƒ
2. "ëŒ€ê¸°ì—´ ë“±ë¡" í´ë¦­ â†’ ìˆœë²ˆ ë°›ê¸°
3. ëŒ€ê¸° ì¤‘ (ì‹¤ì‹œê°„ ìˆœë²ˆ í™•ì¸)
4. ì•Œë¦¼ ë°›ê¸° "ê¸°êµ¬ ì‚¬ìš© ê°€ëŠ¥!" (5ë¶„ ìœ ì˜ˆì‹œê°„)
5. "ìš´ë™ ì‹œì‘" í´ë¦­
6. ì„¸íŠ¸ë³„ ìš´ë™ ì§„í–‰
7. ìë™ ì™„ë£Œ â†’ ë‹¤ìŒ ëŒ€ê¸°ìì—ê²Œ ì•Œë¦¼
```

### 4. ì„¸íŠ¸ë³„ ìš´ë™ ì§„í–‰
- **ì„¸íŠ¸ ì‹œì‘**: ìë™ìœ¼ë¡œ í˜„ì¬ ì„¸íŠ¸ í‘œì‹œ
- **ì„¸íŠ¸ ì™„ë£Œ**: "ì„¸íŠ¸ ì™„ë£Œ" ë²„íŠ¼ â†’ ìë™ íœ´ì‹ ì‹œì‘
- **íœ´ì‹ ì¤‘**: ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸ â†’ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì„¸íŠ¸
- **íœ´ì‹ ê±´ë„ˆë›°ê¸°**: "ë‹¤ìŒ ì„¸íŠ¸ ì‹œì‘" ë²„íŠ¼ìœ¼ë¡œ ì¦‰ì‹œ ë‹¤ìŒ ì„¸íŠ¸
- **ìš´ë™ ì¤‘ë‹¨**: "ì¤‘ë‹¨" ë²„íŠ¼ìœ¼ë¡œ ì–¸ì œë“  ì¢…ë£Œ ê°€ëŠ¥

## ğŸ”„ ìš´ë™ í”Œë¡œìš° ìƒì„¸

### ğŸ¯ **ì„¸íŠ¸ë³„ ì§„í–‰ ì˜ˆì‹œ** (3ì„¸íŠ¸, 3ë¶„ íœ´ì‹)

```mermaid
graph TD
    A[ìš´ë™ ì‹œì‘] --> B[ì„¸íŠ¸ 1 ìš´ë™ ì¤‘]
    B --> C[ì„¸íŠ¸ ì™„ë£Œ ë²„íŠ¼]
    C --> D[3ë¶„ íœ´ì‹ íƒ€ì´ë¨¸]
    D --> E[ìë™ìœ¼ë¡œ ì„¸íŠ¸ 2 ì‹œì‘]
    E --> F[ì„¸íŠ¸ ì™„ë£Œ ë²„íŠ¼]
    F --> G[3ë¶„ íœ´ì‹ íƒ€ì´ë¨¸]
    G --> H[ìë™ìœ¼ë¡œ ì„¸íŠ¸ 3 ì‹œì‘]
    H --> I[ì„¸íŠ¸ ì™„ë£Œ ë²„íŠ¼]
    I --> J[ğŸ‰ ì „ì²´ ìš´ë™ ì™„ë£Œ]
    J --> K[ë‹¤ìŒ ëŒ€ê¸°ìì—ê²Œ ìë™ ì•Œë¦¼]
    
    D --> L[íœ´ì‹ ê±´ë„ˆë›°ê¸°]
    L --> E
    G --> M[íœ´ì‹ ê±´ë„ˆë›°ê¸°]
    M --> H
    
    B --> N[ìš´ë™ ì¤‘ë‹¨]
    E --> N
    H --> N
    N --> K
```

